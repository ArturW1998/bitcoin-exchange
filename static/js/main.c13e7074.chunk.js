(this["webpackJsonpbitcoin-exchange"]=this["webpackJsonpbitcoin-exchange"]||[]).push([[0],{1:function(e,t,n){e.exports={quoteTable:"styles_quoteTable__2wm5a",th:"styles_th__2FCC1",thSortDown:"styles_thSortDown__1z6Te",thSortUp:"styles_thSortUp__2R3D0",btn:"styles_btn__3sPcG",error:"styles_error__UmtkX",errorText:"styles_errorText__10Rma"}},17:function(e,t,n){e.exports=n(29)},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"tickers",(function(){return L}));var a=n(0),o=n.n(a),i=n(5),c=n(4),s={IS_PROD:!0,IS_DEV:!1},l=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function u(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var m,d=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,30)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),o(e),i(e)}))},f=n(3),p=n(2),b=n(16);!function(e){e.UP="up",e.DOWN="down"}(m||(m={}));var v,h=m,y=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),{payload:t}},E={tickers:{set:Object(f.b)("tickers/set",y),update:Object(f.b)("tickers/update",y)},symbols:{set:Object(f.b)("tickers/symbols/set")},toggleDarkTheme:Object(f.b)("tickers/toggle/DarkTheme"),setSortType:Object(f.b)("tickers/sortType/set"),toggleLimit:Object(f.b)("tickers/toggle/limit50")},g={data:[],previousData:{},symbols:{},onLimit50:!0,sortType:{field:"last",type:h.DOWN},isDarkTheme:!1},k=E.tickers,w=E.symbols,T=E.toggleDarkTheme,D=E.setSortType,O=E.toggleLimit,S=Object(f.c)(g,(function(e){e.addCase(k.set,(function(e,t){var n=e.data;t.payload.forEach((function(e){n.push(e)}))})).addCase(k.update,(function(e,t){var n=e.data,r=e.previousData,a=t.payload;Object.keys(r).forEach((function(e){return delete r[e]})),a.forEach((function(e){var t=n.findIndex((function(t){return t.symbol===e.symbol}));-1!==t?(r[e.symbol]=Object(b.a)({},n[t]),n[t]=e):n.push(e)}))})).addCase(w.set,(function(e,t){var n=e.symbols;t.payload.forEach((function(e){n[e.id]=e}))})).addCase(T,(function(e){e.isDarkTheme=!e.isDarkTheme})).addCase(D,(function(e,t){var n=t.payload;e.sortType=n})).addCase(O,(function(e){e.onLimit50=!e.onLimit50}))})),_=function(e){return e.tickers},L=S,C=Object(f.a)({reducer:Object(p.b)(r),devTools:s.IS_DEV}),N=n(10),P=n(11),j=n(15),U=n(13),x=n(1),W=n.n(x),A=function(e){var t=e.children;return o.a.createElement("div",{className:W.a.error},o.a.createElement("p",{className:W.a.errorText},"Something went wrong!"),t)},B=function(e){Object(j.a)(n,e);var t=Object(U.a)(n);function n(){var e;Object(N.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hasError:!1},e}return Object(P.a)(n,[{key:"render",value:function(){var e=this.state.hasError,t=this.props.children;return e?o.a.createElement(A,null):t}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}(a.Component),I=function(e,t){return function(n,r){var a="symbol"===e,o=a?n[e]:+n[e],i=a?r[e]:+r[e],c=!t||t===h.UP;return o>i?c?1:-1:o<i?c?-1:1:0}},R=n(14),M=function(e,t){var n=I("last",h.DOWN),r=Object(R.a)(e.data);return r=r.sort(n),e.onLimit50&&(r=r.slice(0,49)),r=r.sort(I(t.field,t.type))},F={CELL_VALUE_UP:"text-success",CELL_VALUE_DOWN:"text-danger",DARK:{TABLE:"table-dark"}};!function(e){e[e.DOWN=-1]="DOWN",e[e.UP=1]="UP",e[e.MIDDLE=0]="MIDDLE"}(v||(v={}));var J,V=v,q=function(e,t,n,r){var a="",o=e[r.field];if("symbol"===r.field&&(o="".concat(t.baseCurrency," / ").concat(t.feeCurrency)),null!==n)switch(r.compare(e,n)){case V.DOWN:a=F.CELL_VALUE_DOWN;break;case V.UP:a=F.CELL_VALUE_UP}return{extClasses:a,value:o}},H=function(e,t){var n="";return e.field===t.field&&(n=t.type===h.UP?W.a.thSortUp:W.a.thSortDown),n},K=n(8),G=n.n(K),Y=n(12);!function(e){e.GET_SYMBOLS="getSymbols",e.SUBSCRIBE_TICKER="subscribeTicker"}(J||(J={}));var z,Q=J,X=function(e){return new Promise((function(t){e.addEventListener("message",(function n(r){var a=r.data,o=JSON.parse(a);e.removeEventListener("message",n),t(o.result)})),e.send(JSON.stringify({id:Q.GET_SYMBOLS,method:Q.GET_SYMBOLS}))}))},$=function(e,t){return new Promise((function(n){var r=new Map;e.addEventListener("message",(function a(o){var i=o.data,c=JSON.parse(i);if("method"in c&&"ticker"===c.method){var s=c.params;r.set(s.symbol,s),r.size===t.length&&(n(r),e.removeEventListener("message",a))}})),t.forEach((function(t){return e.send(JSON.stringify({id:Q.SUBSCRIBE_TICKER,method:Q.SUBSCRIBE_TICKER,params:{symbol:t.id}}))}))}))},Z=function(e,t){var n=new Map,r=Date.now();e.addEventListener("message",(function(e){var a=e.data,o=JSON.parse(a).params;if(n.set(o.symbol,o),Date.now()-r>50){var i=E.tickers;t(i.update(n)),r=Date.now(),n.clear()}}))};!function(e){e.BASE_PATH="wss://api.exchange.bitcoin.com/api/2/ws",e.WS_PATH="/ws"}(z||(z={}));var ee=z,te=function(e){return new Promise((function(t){e.addEventListener("open",(function(){return t()}))}))},ne=function(){var e=Object(Y.a)(G.a.mark((function e(t,n){var r,a,o,i;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(t);case 2:return e.next=4,X(t);case 4:return r=e.sent,a=E.symbols,o=E.tickers,n(a.set(r)),e.next=9,$(t,r);case 9:i=e.sent,n(o.set(i)),Z(t,n);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),re=[{title:"Ticker",field:"symbol",compare:I("symbol")},{title:"Bid",field:"bid",compare:I("bid")},{title:"Ask",field:"ask",compare:I("ask")},{title:"High",field:"high",compare:I("high")},{title:"Low",field:"low",compare:I("low")},{title:"Last",field:"last",compare:I("last")}],ae=Object(a.memo)((function(e){var t=e.ticker,n=e.previousTicker,r=e.symbol;return o.a.createElement("tr",{key:t.symbol},re.map((function(e){var a=q(t,r,n,e),i=a.extClasses,c=a.value;return o.a.createElement("td",{key:e.field,className:"".concat(i," ").concat(W.a.th)},c)})))})),oe=function(e){var t=e.dispatch,n=e.sortParams;return o.a.createElement("thead",null,o.a.createElement("tr",null,re.map((function(e){var r=H(e,n);return o.a.createElement("th",{key:e.field,className:r,onClick:function(){var r={type:n.field===e.field&&n.type===h.DOWN?h.UP:h.DOWN,field:e.field};t(E.setSortType(r))}},e.title)}))))},ie=function(e){var t=e.data,n=e.previousData,r=e.themeDark,a=e.symbolsMap,i=e.sortParams,c=e.dispatch,s=r?F.DARK.TABLE:"";return o.a.createElement("div",{className:"table-responsive"},o.a.createElement("table",{className:"table table-striped ".concat(W.a.quoteTable," ").concat(s)},o.a.createElement(oe,{dispatch:c,sortParams:i}),o.a.createElement("tbody",null,t.map((function(e){var t=n[e.symbol]||null,r=a[e.symbol];return o.a.createElement(ae,{key:e.symbol,previousTicker:t,symbol:r,ticker:e})})))))},ce=function(){var e=Object(c.b)(),t=Object(c.c)(_),n=t.sortType;Object(a.useEffect)((function(){var t=new WebSocket("".concat(ee.BASE_PATH).concat(ee.WS_PATH));return ne(t,e),function(){t.close()}}),[e]);var r=M(t,n);return o.a.createElement(ie,{data:r,dispatch:e,previousData:t.previousData,sortParams:n,symbolsMap:t.symbols,themeDark:t.isDarkTheme})},se=function(){var e=Object(c.b)(),t=E.toggleLimit,n=E.toggleDarkTheme,r=[{id:"Limit tickers",action:t(),text:"On / Off Limit tickers"},{id:"Dark Theme",action:n(),text:"On / Off Dark Theme"}];return o.a.createElement("div",{"aria-label":"Quote Tickers controls"},r.map((function(t,n){var i=t.id,c=t.action,s=t.text;return o.a.createElement(a.Fragment,{key:i},o.a.createElement("button",{className:"btn btn-primary ".concat(W.a.btn),onClick:function(){e(c)},type:"button"},s),n!==r.length-1&&" ")})))},le=(n(27),function(){var e=[{id:"quoteTickersControls",component:se},{id:"quoteTable",component:ce}];return o.a.createElement("div",{className:"container-lg"},e.map((function(e){var t=e.id,n=e.component;return o.a.createElement("div",{key:t,className:"row pt-3"},o.a.createElement("div",{className:"col"},o.a.createElement(n,null)))})))});n(28);Object(i.render)(o.a.createElement(a.StrictMode,null,o.a.createElement(c.a,{store:C},o.a.createElement(B,null,o.a.createElement(le,null)))),document.getElementById("root")),function(e){if(s.IS_PROD&&"serviceWorker"in navigator){if(new URL("/bitcoin-exchange",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/bitcoin-exchange","/service-worker.js");l?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&!r.includes("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):u(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):u(t,e)}))}}(),s.IS_DEV&&d(console.log)}},[[17,1,2]]]);
//# sourceMappingURL=main.c13e7074.chunk.js.map